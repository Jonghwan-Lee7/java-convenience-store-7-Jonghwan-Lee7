# Convenience-Store

---

## 프로그램 플로우 및 구현해야 하는 기능


- [ ] **1. 구현에 필요한 상품목록과 행사 목록을 파일 입출력을 통해 불러온다.**
  - [x] ```src/main/resources/products.md```과 ```src/main/resources/promotions.md``` 파일을 읽어드린다
  - [x] 프로모션 정보 ( 기한, N+1.. ) 를 얻어 저장한다.
    - [ ] 잘못된 정보 양식이 들어오는 경우 오류를 발생시킨다.
  - [x] 불러온 값을 통해 재고, 프로모션 재고를 얻어 저장한다.
    - [ ] 잘못된 정보 양식이 들어오는 경우 오류를 발생시킨다.

<br>

- [x] **2. 상품 재고와 행사 여부를 안내문구와 함께 출력한다.**
  - [x] 먼저 안내 문구를 출력한다
  - [x] 재고 목록을 출력한다. 
    - [x] 각각의 상품마다 "- 상품명 금액 보유갯수 프로모션" 형태로 출력한다
    - [x] 상품 가격은 0 세 개 마다 ","를 붙여 출력한다 
    - [x] 상품 수량이 0개인 경우 "재고 없음" 이라고 출력한다.
    - [x] 상품명이 동일하더라도, 프로모션 재고와 일반 재고를 구분하여 출력한다.

<br>

- [ ] **3. 안내 후 구매할 상품과 수량을 입력 받는다.**
  - [ ] 안내 문구를 출력한다.
  - [ ] 상품명, 수량은 하이픈(-)으로, 개별 상품은 대괄호([])로 묶어서 쉼표(,)로 구분한다
    - ex ) [콜라-10],[사이다-3]
  - [ ] 양식에 맞지 않는 입력값의 경우 오류를 발생시키고  다시 입력을 받는다. 

<br>

- [ ] **4. 각 상품의 재고 수량을 고려하여 결제 가능여부를 확인 및 구매 목록을 만든다.**
  - [ ] 결제 불가능한 입력값이 오는 경우 오류 발생 후 다시 입력받는다.
    - [ ] 존재하지 않는 상품을 입력한 경우 오류를 발생시킨다.
    - [ ] 각 상품의 “프로모션 재고 수량 + 재고 수량”보다 결제 요청한 값이 크면 오류를 발생시킨다.
  - [ ] 프로모션 혜택이 있는 경우, 프로모션 기간을 확인하여 할인이 적용되는 지 확인한다.
    - [ ] 적용이 되는 경우 프로모션 재고를 우선적으로 차감하며, 프로모션 재고가 부족할 경우 일반 재고를 사용한다. 
    - [ ] 적용이 안되는 경우 일반 재고를 우선적으로 차감하며, 프로모션 재고가 부족한 경우 일반 재고를 사용한다.
  - [ ] 프로모션 적용 여부까지 포함한 구매 리스트를 생성한다.

<br>

- [ ] **5. 구매리스트에 따라 다음에 실행 할 로직을 결정한다..**
  - [ ] 구매리스트에 있는 프로모션 상품들의 경우에 따라 다음에 시행할 로직을 결정한다.
    - [ ] 만약 프로모션 적용이 가능한 제품을 적게 가져온 경우, 6번 로직을 시행한다.
    - [ ] 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택없이 결제해야 되는 경우, 7번 로직으로 이동한다.
    - [ ] 위 두 경우에 모두 해당되지 않는 경우  8번 로직으로 이동한다.

<br>

- [ ] **6. 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 그 수량만큼 추가 여부를 입력받는다.** 
  - [ ] 안내 문구를 출력한다.
  - [ ] 입력값에 따라 다른 처리를 진행한다. 
    - [ ] Y: 증정 받을 수 있는 상품을 추가한다. / N: 증정 받을 수 있는 상품을 추가하지 않는다.
    - [ ] Y 와 N 이외의 입력값은 오류 발생 후 다시 입력받는다.
  - [ ] 로직 종료 시 8번 로직으로 넘어간다.


<br>

- [ ] **7. 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할 지, 여부를 입력받는다.**
  - [ ] 안내 문구를 출력한다.
  - [ ] 입력값에 따라 다른 처리를 진행한다.
    - [ ] Y: 일부 수량에 대해 정가로 결제한다. 즉 그대로 유지한다. / N: 정가로 결제해야하는 수량만큼 구매 목록에서 제거한다.
    - [ ] Y 와 N 이외의 입력값은 오류 발생 후 다시 입력받는다.


<br>

- [ ] **8. 멤버십 할인 적용 여부를 입력 받는다**
  - [ ] 안내 문구를 출력한다.
  - [ ] 입력값에 따라 다른 처리를 진행한다. 
    - [ ] Y: 멤버십 할인을 적용한다. / N: 멤버십 할인을 적용하지 않는다.
  - [ ] 멤버십 할인을 하는 경우, 로직에 따라 할인을 진행한다. 
    - [ ] 프로모션 적용 후 남은 금액에 대해 멤버십 할인을 적용한다. 
    - [ ] 프로모션 미적용 금액의 30%를 할인받는다. 
    - [ ] 단, 멤버십 할인의 최대 한도는 8,000원이다.


<br>

- [ ] **9. 구매금액를 계산한다.**
  - [ ] 프로모션 및 할인 적용 이전 구매한 총 수량과 총 금액을 통해 총구매액을 구한다.
  - [ ] 이후 프로모션에 의해서 무엇이 증정되었는 지 데이터를 불러오고, 그 증정된 상품들의 가격의 합을 통해 행사할인을 구한다. 
  - [ ] 이후 멤버십ㅇ 의해 추가로 할인된 금액안 멤버십할인을 구한다
  - [ ] “내실돈” = “총구매액”  - “행사할인” - “멤버십할인” 를 통해 최종 결제 금액을 구한다

<br>


- [ ] **10. 계산한 결과를 영수증 형태로 출력한다.**
  - [ ] 8번을 통해 구한 값들을 양식에 맞춰서 출력한다. 

<br>

- [ ] **11. 구매한 결과를 재고에 반영한다.**


<br>



- [ ] **12. 추가 구매 여부를 묻는다.**
- Y: 2번로직으로 돌아간다. 이때 이전 구매 결과가 반영된 재고가 출력되어야 한다.
- N: 프로그램을 종료한다.